/*
     YUI 3.15.0 (build 834026e)
     Copyright 2014 Yahoo! Inc. All rights reserved.
     Licensed under the BSD License.
     http://yuilibrary.com/license/
     */
YUI.add('scrollview-base',function(Y,NAME){var getClassName=Y.ClassNameManager.getClassName,DOCUMENT=Y.config.doc,IE=Y.UA.ie,NATIVE_TRANSITIONS=Y.Transition.useNative,vendorPrefix=Y.Transition._VENDOR_PREFIX,SCROLLVIEW='scrollview',CLASS_NAMES={vertical:getClassName(SCROLLVIEW,'vert'),horizontal:getClassName(SCROLLVIEW,'horiz')},EV_SCROLL_END='scrollEnd',FLICK='flick',DRAG='drag',MOUSEWHEEL='mousewheel',UI='ui',TOP='top',LEFT='left',PX='px',AXIS='axis',SCROLL_Y='scrollY',SCROLL_X='scrollX',BOUNCE='bounce',DISABLED='disabled',DECELERATION='deceleration',DIM_X='x',DIM_Y='y',BOUNDING_BOX='boundingBox',CONTENT_BOX='contentBox',GESTURE_MOVE='gesturemove',START='start',END='end',EMPTY='',ZERO='0s',SNAP_DURATION='snapDuration',SNAP_EASING='snapEasing',EASING='easing',FRAME_DURATION='frameDuration',BOUNCE_RANGE='bounceRange',_constrain=function(val,min,max){return Math.min(Math.max(val,min),max);};function ScrollView(){ScrollView.superclass.constructor.apply(this,arguments);}
Y.ScrollView=Y.extend(ScrollView,Y.Widget,{_forceHWTransforms:Y.UA.webkit?true:false,_prevent:{start:false,move:true,end:false},lastScrolledAmt:0,_minScrollX:null,_maxScrollX:null,_minScrollY:null,_maxScrollY:null,initializer:function(){var sv=this;sv._bb=sv.get(BOUNDING_BOX);sv._cb=sv.get(CONTENT_BOX);sv._cAxis=sv.get(AXIS);sv._cBounce=sv.get(BOUNCE);sv._cBounceRange=sv.get(BOUNCE_RANGE);sv._cDeceleration=sv.get(DECELERATION);sv._cFrameDuration=sv.get(FRAME_DURATION);},bindUI:function(){var sv=this;sv._bindFlick(sv.get(FLICK));sv._bindDrag(sv.get(DRAG));sv._bindMousewheel(true);sv._bindAttrs();if(IE){sv._fixIESelect(sv._bb,sv._cb);}
if(ScrollView.SNAP_DURATION){sv.set(SNAP_DURATION,ScrollView.SNAP_DURATION);}
if(ScrollView.SNAP_EASING){sv.set(SNAP_EASING,ScrollView.SNAP_EASING);}
if(ScrollView.EASING){sv.set(EASING,ScrollView.EASING);}
if(ScrollView.FRAME_STEP){sv.set(FRAME_DURATION,ScrollView.FRAME_STEP);}
if(ScrollView.BOUNCE_RANGE){sv.set(BOUNCE_RANGE,ScrollView.BOUNCE_RANGE);}},_bindAttrs:function(){var sv=this,scrollChangeHandler=sv._afterScrollChange,dimChangeHandler=sv._afterDimChange;sv.after({'scrollEnd':sv._afterScrollEnd,'disabledChange':sv._afterDisabledChange,'flickChange':sv._afterFlickChange,'dragChange':sv._afterDragChange,'axisChange':sv._afterAxisChange,'scrollYChange':scrollChangeHandler,'scrollXChange':scrollChangeHandler,'heightChange':dimChangeHandler,'widthChange':dimChangeHandler});},_bindDrag:function(drag){var sv=this,bb=sv._bb;bb.detach(DRAG+'|*');if(drag){bb.on(DRAG+'|'+GESTURE_MOVE+START,Y.bind(sv._onGestureMoveStart,sv));}},_bindFlick:function(flick){var sv=this,bb=sv._bb;bb.detach(FLICK+'|*');if(flick){bb.on(FLICK+'|'+FLICK,Y.bind(sv._flick,sv),flick);sv._bindDrag(sv.get(DRAG));}},_bindMousewheel:function(mousewheel){var sv=this,bb=sv._bb;bb.detach(MOUSEWHEEL+'|*');if(mousewheel){Y.one(DOCUMENT).on(MOUSEWHEEL,Y.bind(sv._mousewheel,sv));}},syncUI:function(){var sv=this,scrollDims=sv._getScrollDims(),width=scrollDims.offsetWidth,height=scrollDims.offsetHeight,scrollWidth=scrollDims.scrollWidth,scrollHeight=scrollDims.scrollHeight;if(sv._cAxis===undefined){sv._cAxis={x:(scrollWidth>width),y:(scrollHeight>height)};sv._set(AXIS,sv._cAxis);}
sv.rtl=(sv._cb.getComputedStyle('direction')==='rtl');sv._cDisabled=sv.get(DISABLED);sv._uiDimensionsChange();if(sv._isOutOfBounds()){sv._snapBack();}},_getScrollDims:function(){var sv=this,cb=sv._cb,bb=sv._bb,TRANS=ScrollView._TRANSITION,origX=sv.get(SCROLL_X),origY=sv.get(SCROLL_Y),origHWTransform,dims;if(NATIVE_TRANSITIONS){cb.setStyle(TRANS.DURATION,ZERO);cb.setStyle(TRANS.PROPERTY,EMPTY);}
origHWTransform=sv._forceHWTransforms;sv._forceHWTransforms=false;sv._moveTo(cb,0,0);dims={'offsetWidth':bb.get('offsetWidth'),'offsetHeight':bb.get('offsetHeight'),'scrollWidth':bb.get('scrollWidth'),'scrollHeight':bb.get('scrollHeight')};sv._moveTo(cb,-(origX),-(origY));sv._forceHWTransforms=origHWTransform;return dims;},_uiDimensionsChange:function(){var sv=this,bb=sv._bb,scrollDims=sv._getScrollDims(),width=scrollDims.offsetWidth,height=scrollDims.offsetHeight,scrollWidth=scrollDims.scrollWidth,scrollHeight=scrollDims.scrollHeight,rtl=sv.rtl,svAxis=sv._cAxis,minScrollX=(rtl?Math.min(0,-(scrollWidth-width)):0),maxScrollX=(rtl?0:Math.max(0,scrollWidth-width)),minScrollY=0,maxScrollY=Math.max(0,scrollHeight-height);if(svAxis&&svAxis.x){bb.addClass(CLASS_NAMES.horizontal);}
if(svAxis&&svAxis.y){bb.addClass(CLASS_NAMES.vertical);}
sv._setBounds({minScrollX:minScrollX,maxScrollX:maxScrollX,minScrollY:minScrollY,maxScrollY:maxScrollY});},_setBounds:function(bounds){var sv=this;sv._minScrollX=bounds.minScrollX;sv._maxScrollX=bounds.maxScrollX;sv._minScrollY=bounds.minScrollY;sv._maxScrollY=bounds.maxScrollY;},_getBounds:function(){var sv=this;return{minScrollX:sv._minScrollX,maxScrollX:sv._maxScrollX,minScrollY:sv._minScrollY,maxScrollY:sv._maxScrollY};},scrollTo:function(x,y,duration,easing,node){if(this._cDisabled){return;}
var sv=this,cb=sv._cb,TRANS=ScrollView._TRANSITION,callback=Y.bind(sv._onTransEnd,sv),newX=0,newY=0,transition={},transform;duration=duration||0;easing=easing||sv.get(EASING);node=node||cb;if(x!==null){sv.set(SCROLL_X,x,{src:UI});newX=-(x);}
if(y!==null){sv.set(SCROLL_Y,y,{src:UI});newY=-(y);}
transform=sv._transform(newX,newY);if(NATIVE_TRANSITIONS){node.setStyle(TRANS.DURATION,ZERO).setStyle(TRANS.PROPERTY,EMPTY);}
if(duration===0){if(NATIVE_TRANSITIONS){node.setStyle('transform',transform);}
else{if(x!==null){node.setStyle(LEFT,newX+PX);}
if(y!==null){node.setStyle(TOP,newY+PX);}}}
else{transition.easing=easing;transition.duration=duration / 1000;if(NATIVE_TRANSITIONS){transition.transform=transform;}
else{transition.left=newX+PX;transition.top=newY+PX;}
node.transition(transition,callback);}},_transform:function(x,y){var prop='translate('+x+'px, '+y+'px)';if(this._forceHWTransforms){prop+=' translateZ(0)';}
return prop;},_moveTo:function(node,x,y){if(NATIVE_TRANSITIONS){node.setStyle('transform',this._transform(x,y));}else{node.setStyle(LEFT,x+PX);node.setStyle(TOP,y+PX);}},_onTransEnd:function(){var sv=this;if(sv._isOutOfBounds()){sv._snapBack();}
else{sv.fire(EV_SCROLL_END);}},_onGestureMoveStart:function(e){if(this._cDisabled){return false;}
var sv=this,bb=sv._bb,currentX=sv.get(SCROLL_X),currentY=sv.get(SCROLL_Y),clientX=e.clientX,clientY=e.clientY;if(sv._prevent.start){e.preventDefault();}
if(sv._flickAnim){sv._cancelFlick();sv._onTransEnd();}
sv.lastScrolledAmt=0;sv._gesture={axis:null,startX:currentX,startY:currentY,startClientX:clientX,startClientY:clientY,endClientX:null,endClientY:null,deltaX:null,deltaY:null,flick:null,onGestureMove:bb.on(DRAG+'|'+GESTURE_MOVE,Y.bind(sv._onGestureMove,sv)),onGestureMoveEnd:bb.on(DRAG+'|'+GESTURE_MOVE+END,Y.bind(sv._onGestureMoveEnd,sv))};},_onGestureMove:function(e){var sv=this,gesture=sv._gesture,svAxis=sv._cAxis,svAxisX=svAxis.x,svAxisY=svAxis.y,startX=gesture.startX,startY=gesture.startY,startClientX=gesture.startClientX,startClientY=gesture.startClientY,clientX=e.clientX,clientY=e.clientY;if(sv._prevent.move){e.preventDefault();}
gesture.deltaX=startClientX-clientX;gesture.deltaY=startClientY-clientY;if(gesture.axis===null){gesture.axis=(Math.abs(gesture.deltaX)>Math.abs(gesture.deltaY))?DIM_X:DIM_Y;}
if(gesture.axis===DIM_X&&svAxisX){sv.set(SCROLL_X,startX+gesture.deltaX);}
else if(gesture.axis===DIM_Y&&svAxisY){sv.set(SCROLL_Y,startY+gesture.deltaY);}},_onGestureMoveEnd:function(e){var sv=this,gesture=sv._gesture,flick=gesture.flick,clientX=e.clientX,clientY=e.clientY,isOOB;if(sv._prevent.end){e.preventDefault();}
gesture.endClientX=clientX;gesture.endClientY=clientY;gesture.onGestureMove.detach();gesture.onGestureMoveEnd.detach();if(!flick){if(gesture.deltaX!==null&&gesture.deltaY!==null){isOOB=sv._isOutOfBounds();if(isOOB){sv._snapBack();}
else{if(!sv.pages||(sv.pages&&!sv.pages.get(AXIS)[gesture.axis])){sv._onTransEnd();}}}}},_flick:function(e){if(this._cDisabled){return false;}
var sv=this,svAxis=sv._cAxis,flick=e.flick,flickAxis=flick.axis,flickVelocity=flick.velocity,axisAttr=flickAxis===DIM_X?SCROLL_X:SCROLL_Y,startPosition=sv.get(axisAttr);if(sv._gesture){sv._gesture.flick=flick;}
if(svAxis[flickAxis]){sv._flickFrame(flickVelocity,flickAxis,startPosition);}},_flickFrame:function(velocity,flickAxis,startPosition){var sv=this,axisAttr=flickAxis===DIM_X?SCROLL_X:SCROLL_Y,bounds=sv._getBounds(),bounce=sv._cBounce,bounceRange=sv._cBounceRange,deceleration=sv._cDeceleration,frameDuration=sv._cFrameDuration,newVelocity=velocity*deceleration,newPosition=startPosition-(frameDuration*newVelocity),min=flickAxis===DIM_X?bounds.minScrollX:bounds.minScrollY,max=flickAxis===DIM_X?bounds.maxScrollX:bounds.maxScrollY,belowMin=(newPosition<min),belowMax=(newPosition<max),aboveMin=(newPosition>min),aboveMax=(newPosition>max),belowMinRange=(newPosition<(min-bounceRange)),withinMinRange=(belowMin&&(newPosition>(min-bounceRange))),withinMaxRange=(aboveMax&&(newPosition<(max+bounceRange))),aboveMaxRange=(newPosition>(max+bounceRange)),tooSlow;if(withinMinRange||withinMaxRange){newVelocity*=bounce;}
tooSlow=(Math.abs(newVelocity).toFixed(4)<0.015);if(tooSlow||belowMinRange||aboveMaxRange){if(sv._flickAnim){sv._cancelFlick();}
if(aboveMin&&belowMax){sv._onTransEnd();}
else{sv._snapBack();}}
else{sv._flickAnim=Y.later(frameDuration,sv,'_flickFrame',[newVelocity,flickAxis,newPosition]);sv.set(axisAttr,newPosition);}},_cancelFlick:function(){var sv=this;if(sv._flickAnim){sv._flickAnim.cancel();delete sv._flickAnim;}},_mousewheel:function(e){var sv=this,scrollY=sv.get(SCROLL_Y),bounds=sv._getBounds(),bb=sv._bb,scrollOffset=10,isForward=(e.wheelDelta>0),scrollToY=scrollY-((isForward?1:-1)*scrollOffset);scrollToY=_constrain(scrollToY,bounds.minScrollY,bounds.maxScrollY);if(bb.contains(e.target)&&sv._cAxis[DIM_Y]){sv.lastScrolledAmt=0;sv.set(SCROLL_Y,scrollToY);if(sv.scrollbars){sv.scrollbars._update();sv.scrollbars.flash();}
sv._onTransEnd();e.preventDefault();}},_isOutOfBounds:function(x,y){var sv=this,svAxis=sv._cAxis,svAxisX=svAxis.x,svAxisY=svAxis.y,currentX=x||sv.get(SCROLL_X),currentY=y||sv.get(SCROLL_Y),bounds=sv._getBounds(),minX=bounds.minScrollX,minY=bounds.minScrollY,maxX=bounds.maxScrollX,maxY=bounds.maxScrollY;return(svAxisX&&(currentX<minX||currentX>maxX))||(svAxisY&&(currentY<minY||currentY>maxY));},_snapBack:function(){var sv=this,currentX=sv.get(SCROLL_X),currentY=sv.get(SCROLL_Y),bounds=sv._getBounds(),minX=bounds.minScrollX,minY=bounds.minScrollY,maxX=bounds.maxScrollX,maxY=bounds.maxScrollY,newY=_constrain(currentY,minY,maxY),newX=_constrain(currentX,minX,maxX),duration=sv.get(SNAP_DURATION),easing=sv.get(SNAP_EASING);if(newX!==currentX){sv.set(SCROLL_X,newX,{duration:duration,easing:easing});}
else if(newY!==currentY){sv.set(SCROLL_Y,newY,{duration:duration,easing:easing});}
else{sv._onTransEnd();}},_afterScrollChange:function(e){if(e.src===ScrollView.UI_SRC){return false;}
var sv=this,duration=e.duration,easing=e.easing,val=e.newVal,scrollToArgs=[];sv.lastScrolledAmt=sv.lastScrolledAmt+(e.newVal-e.prevVal);if(e.attrName===SCROLL_X){scrollToArgs.push(val);scrollToArgs.push(sv.get(SCROLL_Y));}
else{scrollToArgs.push(sv.get(SCROLL_X));scrollToArgs.push(val);}
scrollToArgs.push(duration);scrollToArgs.push(easing);sv.scrollTo.apply(sv,scrollToArgs);},_afterFlickChange:function(e){this._bindFlick(e.newVal);},_afterDisabledChange:function(e){this._cDisabled=e.newVal;},_afterAxisChange:function(e){this._cAxis=e.newVal;},_afterDragChange:function(e){this._bindDrag(e.newVal);},_afterDimChange:function(){this._uiDimensionsChange();},_afterScrollEnd:function(){var sv=this;if(sv._flickAnim){sv._cancelFlick();}},_axisSetter:function(val){if(Y.Lang.isString(val)){return{x:val.match(/x/i)?true:false,y:val.match(/y/i)?true:false};}},_setScroll:function(val){if(this._cDisabled){val=Y.Attribute.INVALID_VALUE;}
return val;},_setScrollX:function(val){return this._setScroll(val,DIM_X);},_setScrollY:function(val){return this._setScroll(val,DIM_Y);}},{NAME:'scrollview',ATTRS:{axis:{setter:'_axisSetter',writeOnce:'initOnly'},scrollX:{value:0,setter:'_setScrollX'},scrollY:{value:0,setter:'_setScrollY'},deceleration:{value:0.93},bounce:{value:0.1},flick:{value:{minDistance:10,minVelocity:0.3}},drag:{value:true},snapDuration:{value:400},snapEasing:{value:'ease-out'},easing:{value:'cubic-bezier(0, 0.1, 0, 1.0)'},frameDuration:{value:15},bounceRange:{value:150}},CLASS_NAMES:CLASS_NAMES,UI_SRC:UI,_TRANSITION:{DURATION:(vendorPrefix?vendorPrefix+'TransitionDuration':'transitionDuration'),PROPERTY:(vendorPrefix?vendorPrefix+'TransitionProperty':'transitionProperty')},BOUNCE_RANGE:false,FRAME_STEP:false,EASING:false,SNAP_EASING:false,SNAP_DURATION:false});},'3.15.0',{"requires":["widget","event-gestures","event-mousewheel","transition"],"skinnable":true});